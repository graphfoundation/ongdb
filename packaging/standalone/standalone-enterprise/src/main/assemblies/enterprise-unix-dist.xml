<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright (c) 2018-2020 "Graph Foundation"
    Graph Foundation, Inc. [https://graphfoundation.org]

    Copyright (c) 2002-2020 "Neo4j,"
    Neo4j Sweden AB [http://neo4j.com]

    This file is part of ONgDB Enterprise Edition. The included source
    code can be redistributed and/or modified under the terms of the
    GNU AFFERO GENERAL PUBLIC LICENSE Version 3
    (http://www.fsf.org/licensing/licenses/agpl-3.0.html) as found
    in the associated LICENSE.txt file.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    Neo4j object code can be licensed independently from the source
    under separate terms from the AGPL. Inquiries can be directed to:
    licensing@neo4j.com

    More information is also available at:
    https://neo4j.com/licensing/

-->
<assembly xmlns="http://maven.apache.org/ASSEMBLY/2.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/ASSEMBLY/2.0.0 http://maven.apache.org/xsd/assembly-2.0.0.xsd">
  <id>unix</id>
  <formats>
    <format>tar.gz</format>
  </formats>

  <fileSets>

    <!-- filter plain text -->
    <fileSet>
      <directory>src/main/distribution/text/enterprise</directory>
      <outputDirectory/>
      <lineEnding>keep</lineEnding>
      <filtered>true</filtered>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <excludes>
        <exclude>**/.keep</exclude>
      </excludes>
    </fileSet>
    <!-- filter and chmod 755 shell scripts -->
    <!-- filter m4 scripts-->
    <fileSet>
      <directory>${project.parent.basedir}/src/main/distribution/shell-scripts</directory>
      <outputDirectory/>
      <lineEnding>unix</lineEnding>
      <fileMode>0755</fileMode>
      <excludes>
        <exclude>**/*.bat</exclude>
        <exclude>**/*.m4</exclude>
        <exclude>**/*.psd1</exclude>
        <exclude>**/*.psm1</exclude>
        <exclude>**/*.ps1</exclude>
        <exclude>**/Neo4j-Management</exclude>
        <exclude>**/*.exe</exclude>
      </excludes>
      <filtered>true</filtered>
    </fileSet>
    <!-- filter and chmod 755 cypher-shell -->
    <fileSet>
      <directory>${project.parent.basedir}/src/main/distribution/cypher-shell</directory>
      <outputDirectory>bin</outputDirectory>
      <lineEnding>keep</lineEnding>
      <fileMode>0755</fileMode>
      <excludes>
        <exclude>**/*.bat</exclude>
        <exclude>**/*.jar</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>${project.parent.basedir}/src/main/distribution/cypher-shell</directory>
      <outputDirectory>bin/tools</outputDirectory>
      <includes>
        <include>**/*.jar</include>
      </includes>
    </fileSet>
    <!-- TODO: temporary workaround for browser dependency -->
    <fileSet>
      <directory>${project.parent.basedir}/src/main/distribution/neo4j-browser-flat</directory>
      <outputDirectory>lib</outputDirectory>
      <includes>
        <include>**/*.jar</include>
      </includes>
      <excludes>
        <exclude>**/*-sources.jar</exclude>
        <exclude>**/*-tests.jar</exclude>
      </excludes>
    </fileSet>
	
    <!-- Begin Enterprise specific filesets not in community -->
  
    <!-- password files -->
    <fileSet>
      <directory>src/main/distribution/text/enterprise</directory>
      <outputDirectory/>
      <lineEnding>unix</lineEnding>
      <filtered>true</filtered>
      <includes>
        <include>conf/jmx.*</include>
      </includes>
      <fileMode>0600</fileMode>
    </fileSet>
     <!-- End Enterprise specific filesets not in community -->
  </fileSets>
  


  <dependencySets>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0755</fileMode>
      <unpack>false</unpack>
      <useProjectArtifact>false</useProjectArtifact>
      <useStrictFiltering>true</useStrictFiltering>
      <includes>
        <include>org.graphfoundation.ongdb:*</include>
        <include>org.apache.lucene:lucene-core</include>
        <include>org.apache.lucene:lucene-analyzers-common</include>
        <include>org.apache.lucene:lucene-queryparser</include>
        <include>org.apache.lucene:lucene-codecs</include>
        <include>org.scala-lang:*</include>
        <include>org.parboiled:*</include>
        <include>org.apache.commons:commons-lang3</include>
		<!-- Enterprise includes -->
		<include>org.ow2.asm:*</include>

      </includes>
      <excludes>
        <exclude>*:pom:*</exclude>
        <!-- Disable Neo4j's data collector
        <exclude>org.graphfoundation.ongdb:ongdb-data-collector</exclude>
-->
      </excludes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0755</fileMode>
      <unpack>false</unpack>
      <useProjectArtifact>false</useProjectArtifact>
      <useStrictFiltering>true</useStrictFiltering>
      <excludes>
        <exclude>org.graphfoundation.ongdb:*</exclude>
        <exclude>org.apache.lucene:*</exclude>
        <exclude>org.scala-lang:*</exclude>
        <exclude>org.parboiled:*</exclude>
        <exclude>org.apache.commons:commons-lang3</exclude>
      </excludes>
    </dependencySet>
 </dependencySets>

</assembly>
